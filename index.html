<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Dark Jurassic | Global Command Terminal</title>
    <link rel="icon" type="image/png" href="logo.png">
    
    <!-- External Assets -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    
    <!-- Firebase SDKs (Compat Mode) -->
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>

    <style>
        :root {
            --primary: #e63946;
            --primary-glow: rgba(230, 57, 70, 0.5);
            --bg-dark: #050505;
            --bg-panel: #0a0a0a;
            --card-bg: #0d0d0d;
            --border: #1a1a1a;
            --accent-blue: #5dade2;
            --text-main: #eeeeee;
            --text-dim: #888888;
            --success: #2ecc71;
            --warning: #f1c40f;
            --sidebar-width: 280px;
            --nav-height: 70px;
        }

        /* --- Scrollbar --- */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg-dark); }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--primary); }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: 'JetBrains+Mono', monospace;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* --- Background Effects --- */
        .scanlines {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 4px, 3px 100%;
            pointer-events: none;
            z-index: 9999;
        }

        .noise {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('https://media.giphy.com/media/oEI9uWUic9ZSM/giphy.gif');
            opacity: 0.03;
            pointer-events: none;
            z-index: 9998;
        }

        /* --- Navigation --- */
        header {
            height: var(--nav-height);
            background: rgba(10, 10, 10, 0.95);
            border-bottom: 1px solid var(--border);
            position: fixed;
            top: 0; width: 100%;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .navbar {
            max-width: 1600px;
            margin: 0 auto;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: var(--text-main);
            font-family: 'Orbitron', sans-serif;
            font-weight: 900;
            font-size: 1.2rem;
            letter-spacing: 2px;
        }

        .logo img {
            height: 40px;
            filter: drop-shadow(0 0 5px var(--primary-glow));
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 10px;
        }

        .nav-links li a {
            color: var(--text-dim);
            text-decoration: none;
            font-size: 0.85rem;
            padding: 8px 12px;
            border-radius: 4px;
            transition: 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .nav-links li a i { font-size: 1.1rem; }
        .nav-links li a:hover, .nav-links li a.active {
            color: var(--primary);
            background: rgba(230, 57, 70, 0.1);
            box-shadow: 0 0 10px rgba(230, 57, 70, 0.1);
        }

        .nav-text { font-size: 0.65rem; text-transform: uppercase; font-weight: bold; }

        .menu-toggle {
            display: none;
            background: none;
            border: 1px solid var(--border);
            color: var(--text-main);
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        /* --- Sidebar (Mobile) --- */
        .mobile-sidebar {
            position: fixed;
            top: 0; left: -100%;
            width: var(--sidebar-width);
            height: 100%;
            background: var(--bg-panel);
            border-right: 1px solid var(--primary);
            z-index: 2000;
            transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
            padding-top: 20px;
            box-shadow: 20px 0 50px rgba(0,0,0,0.8);
        }

        .mobile-sidebar.open { left: 0; }

        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid #222;
            margin-bottom: 10px;
        }

        .sidebar-links { list-style: none; }
        .sidebar-links li a {
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
            color: var(--text-dim);
            text-decoration: none;
            transition: 0.2s;
            border-left: 4px solid transparent;
            font-size: 0.9rem;
        }

        .sidebar-links li a:hover {
            background: rgba(230, 57, 70, 0.05);
            color: var(--primary);
            border-left-color: var(--primary);
        }

        .sidebar-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1999;
            display: none;
        }

        /* --- Main Layout --- */
        main {
            margin-top: var(--nav-height);
            padding: 20px;
            max-width: 1600px;
            margin-left: auto;
            margin-right: auto;
            display: grid;
            grid-template-columns: 350px 1fr 300px;
            gap: 20px;
        }

        /* --- Components --- */
        .terminal-panel {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 8px;
        }

        .panel-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 0.75rem;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* --- Glitch Text --- */
        .glitch-text {
            position: relative;
            display: inline-block;
            color: #fff;
            mix-blend-mode: lighten;
        }

        .glitch-text::before, .glitch-text::after {
            content: attr(data-text);
            position: absolute;
            top: 0; width: 100%; height: 100%;
            background: var(--bg-dark);
            clip: rect(0, 0, 0, 0);
        }

        .glitch-text::after {
            left: 2px;
            text-shadow: -1px 0 var(--primary);
            animation: glitch-anim 2s infinite linear alternate-reverse;
        }

        @keyframes glitch-anim {
            0% { clip: rect(10px, 9999px, 20px, 0); }
            20% { clip: rect(45px, 9999px, 60px, 0); }
            40% { clip: rect(15px, 9999px, 30px, 0); }
            100% { clip: rect(80px, 9999px, 90px, 0); }
        }

        /* --- Hero Section --- */
        .hero {
            grid-column: 1 / -1;
            padding: 40px;
            background: linear-gradient(rgba(230, 57, 70, 0.05), transparent), url('https://images.unsplash.com/photo-1620121692029-d088224efc74?q=80&w=1600');
            background-size: cover;
            background-position: center;
            border: 1px solid var(--border);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            margin-bottom: 10px;
        }

        .hero h1 {
            font-size: 3rem;
            font-family: 'Orbitron', sans-serif;
            margin-bottom: 10px;
        }

        .agent-badge {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(0,0,0,0.8);
            padding: 8px 20px;
            border-radius: 50px;
            border: 1px solid var(--primary);
            font-size: 0.8rem;
        }

        .status-dot {
            width: 10px; height: 10px;
            background: var(--success);
            border-radius: 50%;
            box-shadow: 0 0 10px var(--success);
            animation: pulse 1.5s infinite;
        }

        /* --- Module Styles --- */
        .log-container {
            height: 400px;
            overflow-y: auto;
            font-size: 0.75rem;
            font-family: 'JetBrains+Mono', monospace;
            padding-right: 5px;
        }

        .log-entry { margin-bottom: 5px; border-left: 2px solid var(--border); padding-left: 10px; }
        .log-time { color: var(--text-dim); }
        .log-tag { color: var(--primary); font-weight: bold; }
        .log-msg-success { color: var(--success); }
        .log-msg-warn { color: var(--warning); }

        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .stat-card {
            background: rgba(255,255,255,0.03);
            padding: 15px;
            border-radius: 6px;
            text-align: center;
        }
        .stat-val { font-size: 1.5rem; color: var(--primary); font-weight: 700; display: block; }
        .stat-label { font-size: 0.6rem; color: var(--text-dim); text-transform: uppercase; }

        .integrity-bar {
            height: 4px;
            background: #222;
            width: 100%;
            margin-top: 10px;
            border-radius: 2px;
            overflow: hidden;
        }
        .integrity-fill {
            height: 100%;
            background: var(--primary);
            width: 98%;
            transition: 0.5s;
        }

        /* --- Footer --- */
        footer {
            margin-top: 40px;
            padding: 40px 20px;
            border-top: 1px solid var(--border);
            text-align: center;
            font-size: 0.7rem;
            color: var(--text-dim);
        }

        /* --- Responsive Queries --- */
        @media (max-width: 1200px) {
            main { grid-template-columns: 1fr 1fr; }
            .side-module-right { grid-column: span 2; }
        }

        @media (max-width: 768px) {
            main { grid-template-columns: 1fr; }
            .nav-links { display: none; }
            .menu-toggle { display: block; }
            .hero h1 { font-size: 1.8rem; }
            .side-module-right { grid-column: span 1; }
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.4; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>

    <div class="scanlines"></div>
    <div class="noise"></div>
    <div class="sidebar-overlay" id="overlay" onclick="toggleSidebar()"></div>

    <!-- Mobile Navigation Sidebar -->
    <aside class="mobile-sidebar" id="sidebar">
        <div class="sidebar-header">
            <a href="index.html" class="logo">
                <img src="logo.png" alt="Logo">
                <span>TERMINAL</span>
            </a>
        </div>
        <ul class="sidebar-links">
            <li><a href="index.html"><i class="fa fa-home"></i> Dashboard</a></li>
            <li><a href="forum.html" class="fa fa-comments"></i> Intel</a></li>
            <li><a href="sightings.html"><i class="fa fa-crosshairs"></i> Live Tracker</a></li>
            <li><a href="dinosaurs.html"><i class="fa fa-dna"></i> Species</a></li>
            <li><a href="users.html"><i class="fa fa-user-secret"></i> Agents</a></li>
            <li><a href="dms.html"><i class="fa fa-envelope"></i> DMs</a></li>
            <li><a href="blackmarket.html"><i class="fa fa-briefcase"></i> Black Market</a></li>
            <li><a href="vault.html"><i class="fa fa-lock"></i> Vault</a></li>
            <li><a href="profile.html"><i class="fa fa-cog"></i> Profile</a></li>
            <li><a href="login.html"><i class="fa fa-sign-in-alt"></i> Log Out</a></li>
        </ul>
    </aside>

    <header>
        <nav class="navbar">
            <a href="index.html" class="logo">
                <img src="logo.png" alt="Dark Jurassic Logo">
                <span class="glitch-text" data-text="DARK JURASSIC">DARK JURASSIC</span>
            </a>

            <ul class="nav-links">
            <li><a href="index.html"><i class="fa fa-home"></i> Dashboard</a></li>
            <li><a href="forum.html" class="fa fa-comments"></i> Intel</a></li>
            <li><a href="sightings.html"><i class="fa fa-crosshairs"></i> Live Tracker</a></li>
            <li><a href="dinosaurs.html"><i class="fa fa-dna"></i> Species</a></li>
            <li><a href="users.html"><i class="fa fa-user-secret"></i> Agents</a></li>
            <li><a href="dms.html"><i class="fa fa-envelope"></i> DMs</a></li>
            <li><a href="blackmarket.html"><i class="fa fa-briefcase"></i> Black Market</a></li>
            <li><a href="vault.html"><i class="fa fa-lock"></i> Vault</a></li>
            <li><a href="profile.html"><i class="fa fa-cog"></i> Profile</a></li>
            <li><a href="login.html"><i class="fa fa-sign-in-alt"></i> Log Out</a></li>
            </ul>

            <button class="menu-toggle" onclick="toggleSidebar()">
                <i class="fa fa-bars"></i>
            </button>
        </nav>
    </header>

    <main>
        <!-- Hero Unit -->
        <section class="hero">
            <h1 class="glitch-text" data-text="TERMINAL ACCESS V3.5">TERMINAL ACCESS V3.5</h1>
            <div class="agent-badge">
                <div class="status-dot"></div>
                <span id="agent-display">INITIATING HANDSHAKE...</span>
            </div>
        </section>

        <!-- Left Column: System Status -->
        <div class="side-module">
            <div class="terminal-panel">
                <div class="panel-header">
                    <span class="panel-title">System Metrics</span>
                    <i class="fa fa-microchip"></i>
                </div>
                <div class="stat-grid">
                    <div class="stat-card">
                        <span class="stat-val" id="agent-count">--</span>
                        <span class="stat-label">Agents Active</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-val" id="threat-level">HIGH</span>
                        <span class="stat-label">Threat Level</span>
                    </div>
                </div>
                <div style="margin-top: 20px;">
                    <span class="stat-label">Network Integrity: <span id="integrity-val">98.4%</span></span>
                    <div class="integrity-bar"><div class="integrity-fill" id="integrity-fill"></div></div>
                </div>
                <div style="margin-top: 20px;">
                    <span class="stat-label">Uplink: Satellite Echo-7</span>
                    <div class="integrity-bar"><div class="integrity-fill" style="width: 45%; background: var(--accent-blue);"></div></div>
                </div>
            </div>

            <div class="terminal-panel" style="margin-top: 20px;">
                <div class="panel-header">
                    <span class="panel-title">Hardware Temp</span>
                    <i class="fa fa-thermometer-half"></i>
                </div>
                <div style="font-size: 0.7rem;">
                    <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
                        <span>CPU Core 0</span><span>44°C</span>
                    </div>
                    <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
                        <span>GPU Cluster</span><span>58°C</span>
                    </div>
                    <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
                        <span>Memory Bank</span><span>32°C</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Middle Column: Main Feed -->
        <div class="main-module">
            <div class="terminal-panel">
                <div class="panel-header">
                    <span class="panel-title">Real-Time Intel Feed</span>
                    <i class="fa fa-rss"></i>
                </div>
                <div class="log-container" id="terminal-logs">
                    <!-- Logs injected via JS -->
                </div>
            </div>
        </div>

        <!-- Right Column: Quick Ops -->
        <div class="side-module side-module-right">
            <div class="terminal-panel">
                <div class="panel-header">
                    <span class="panel-title">Active Field Agents</span>
                    <i class="fa fa-users"></i>
                </div>
                <div id="active-agents-list" style="max-height: 200px; overflow-y:auto;">
                    <!-- Agent list injected via JS -->
                    <div style="text-align: center; color: var(--text-dim); font-size: 0.7rem; padding: 20px;">
                        Scanning encrypted channels...
                    </div>
                </div>
            </div>

            <div class="terminal-panel" style="margin-top: 20px;">
                <div class="panel-header">
                    <span class="panel-title">Security Alert</span>
                    <i class="fa fa-shield-alt"></i>
                </div>
                <p style="font-size: 0.7rem; border-left: 2px solid var(--primary); padding-left: 10px; color: var(--text-dim);">
                    [CLASSIFIED] Unidentified genetic signatures detected in the Wild Sector. Avoid Area-51 coordinates.
                </p>
            </div>

            <div class="terminal-panel" style="margin-top: 20px; background: rgba(230, 57, 70, 0.05);">
                <div class="panel-header">
                    <span class="panel-title">Global Coords</span>
                    <i class="fa fa-map-marker-alt"></i>
                </div>
                <div id="live-coords" style="font-family: monospace; font-size: 0.9rem; color: var(--primary);">
                    0.0000, 0.0000
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2024 DARK JURASSIC GLOBAL NETWORK. ALL RIGHTS RESERVED. [CLEARANCE LEVEL 4 REQUIRED]</p>
        <p style="margin-top: 10px; opacity: 0.5;">POWERED BY INGEN CORE SYSTEMS // CLOUD SYNC V3.0</p>
    </footer>

    <script>
        // --- Firebase Configuration ---
        const firebaseConfig = {
            apiKey: "AIzaSyBxYUTNlBuhPQ2neLPAYCLDg0e-J76DIuU",
            authDomain: "dark-jurassic-378b5.firebaseapp.com",
            databaseURL: "https://dark-jurassic-378b5-default-rtdb.firebaseio.com/",
            projectId: "dark-jurassic-378b5",
            storageBucket: "dark-jurassic-378b5.firebasestorage.app",
            messagingSenderId: "144100722100",
            appId: "1:144100722100:web:be3b4690724a7a117fdee1"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();

        let currentAgent = "GUEST";
        let myUsername = "";

        // --- Auth & Profile Listeners ---
        auth.onAuthStateChanged(user => {
            if (user) {
                myUsername = user.email.split('@')[0].replace(/\./g, '_');
                db.ref('users/' + myUsername).on('value', snap => {
                    const data = snap.val();
                    currentAgent = data?.displayName || myUsername;
                    document.getElementById('agent-display').innerText = `AUTHENTICATED: ${currentAgent.toUpperCase()}`;
                    addLog(`Agent ${currentAgent} session verified.`, "success");
                });
                
                // Set online status
                db.ref('status/' + myUsername).set({
                    name: currentAgent,
                    online: true,
                    lastSeen: firebase.database.ServerValue.TIMESTAMP
                });
                db.ref('status/' + myUsername).onDisconnect().remove();

            } else {
                document.getElementById('agent-display').innerText = "RESTRICTED ACCESS - PLEASE LOGIN";
                addLog("Warning: Unauthenticated access detected.", "warn");
            }
        });

        // --- Sidebar Logic ---
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('overlay');
            sidebar.classList.toggle('open');
            overlay.style.display = sidebar.classList.contains('open') ? 'block' : 'none';
        }

        // --- Global Stats ---
        db.ref('users').on('value', snap => {
            const count = snap.numChildren();
            document.getElementById('agent-count').innerText = count;
        });

        db.ref('status').on('value', snap => {
            const container = document.getElementById('active-agents-list');
            container.innerHTML = "";
            snap.forEach(child => {
                const agent = child.val();
                const item = document.createElement('div');
                item.style.padding = "8px 0";
                item.style.borderBottom = "1px solid #111";
                item.style.display = "flex";
                item.style.alignItems = "center";
                item.style.justifyContent = "space-between";
                item.innerHTML = `
                    <div style="display:flex; align-items:center; gap:10px;">
                        <div style="width:6px; height:6px; background:var(--success); border-radius:50%;"></div>
                        <span style="font-size:0.7rem;">@${child.key}</span>
                    </div>
                    <span style="font-size:0.55rem; color:var(--text-dim);">ACTIVE</span>
                `;
                container.appendChild(item);
            });
        });

        // --- System Log UI ---
        function addLog(msg, type = 'info') {
            const logBox = document.getElementById('terminal-logs');
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            
            const now = new Date();
            const time = `[${now.getHours().toString().padStart(2,'0')}:${now.getMinutes().toString().padStart(2,'0')}:${now.getSeconds().toString().padStart(2,'0')}]`;
            
            let tag = "[SYSTEM]";
            let colorClass = "";
            if(type === 'warn') { tag = "[DANGER]"; colorClass = "log-msg-warn"; }
            if(type === 'success') { tag = "[SECURE]"; colorClass = "log-msg-success"; }

            entry.innerHTML = `<span class="log-time">${time}</span> <span class="log-tag">${tag}</span> <span class="${colorClass}">${msg}</span>`;
            logBox.prepend(entry);

            // Keep only latest 50 logs
            if(logBox.children.length > 50) logBox.removeChild(logBox.lastChild);
        }

        // --- Data Listeners (Forum / Sightings) ---
        db.ref('forum_threads').limitToLast(3).on('child_added', snap => {
            const thread = snap.val();
            addLog(`New Intel Broadcast: "${thread.title}" by Agent ${thread.author || 'Anonymous'}`);
        });

        db.ref('sightings').limitToLast(3).on('child_added', snap => {
            const s = snap.val();
            addLog(`SIGHTING ALERT: ${s.name} spotted at ${s.location}. Threat assessed.`, "warn");
        });

        // --- Simulators for "Glitchy" Vibe ---
        setInterval(() => {
            const coords = document.getElementById('live-coords');
            if(coords) {
                const lat = (Math.random() * 180 - 90).toFixed(4);
                const lng = (Math.random() * 360 - 180).toFixed(4);
                coords.innerText = `${lat}, ${lng}`;
            }
        }, 4000);

        setInterval(() => {
            const val = (97 + Math.random() * 2.9).toFixed(1);
            const el = document.getElementById('integrity-val');
            const fill = document.getElementById('integrity-fill');
            if(el && fill) {
                el.innerText = `${val}%`;
                fill.style.width = `${val}%`;
                if(val < 98) addLog("Minor uplink interference detected.", "warn");
            }
        }, 12000);

        const worldEvents = [
            "Asset #884 containment compromised.",
            "Satellite relay 'ECHO-4' re-established.",
            "Black market prices for DNA vials surging.",
            "New species data decrypted: Giganotosaurus.",
            "Agent Dossier #122 archived by system.",
            "Incoming encrypted message from [REDACTED].",
            "Hardware temperature at Nublar site rising."
        ];

        setInterval(() => {
            const msg = worldEvents[Math.floor(Math.random() * worldEvents.length)];
            addLog(msg);
        }, 20000);

        window.onload = () => {
            addLog("Initializing terminal protocols...", "info");
            addLog("Loading InGen hardware drivers...", "info");
            addLog("System ready. Secure your connection.", "success");
        };

    </script>
</body>
</html>