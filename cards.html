<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dark Jurassic | Dino Stones Terminal</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>

    <style>
        :root {
            --red: #e63946;
            --blue: #00d4ff;
            --gold: #f1c40f;
            --dark-bg: #030303;
            --panel: #0d0d0d;
            --border: rgba(255, 255, 255, 0.08);
        }

        body { 
            background: var(--dark-bg); color: #e0e0e0; margin: 0; 
            font-family: 'Inter', sans-serif; overflow-x: hidden;
        }

        /* --- NAVIGATION & MOBILE DRAWER --- */
        .navbar {
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 25px; height: 70px; background: rgba(0,0,0,0.95);
            border-bottom: 1px solid var(--border); position: fixed;
            top: 0; width: 100%; box-sizing: border-box; z-index: 9999;
            backdrop-filter: blur(10px);
        }
        .brand { display: flex; align-items: center; gap: 10px; text-decoration: none; }
        .brand img { height: 28px; }
        .brand span { color: white; font-weight: 800; letter-spacing: 1px; text-transform: uppercase; font-size: 1rem; }

        .menu-toggle { display: none; color: white; font-size: 1.5rem; cursor: pointer; z-index: 10001; }

        .nav-links { display: flex; gap: 15px; list-style: none; margin: 0; padding: 0; }
        .nav-links a { 
            color: #888; text-decoration: none; font-size: 0.7rem; 
            font-weight: 700; text-transform: uppercase; transition: 0.3s;
            display: flex; align-items: center; gap: 6px;
        }
        .nav-links a:hover, .nav-links li.active a { color: var(--red); }

        @media (max-width: 1150px) {
            .menu-toggle { display: block; }
            .nav-links {
                position: fixed; top: 0; right: -100%; width: 280px; height: 100vh;
                background: #0a0a0a; flex-direction: column; padding: 100px 30px;
                transition: 0.5s cubic-bezier(0.165, 0.84, 0.44, 1);
                border-left: 1px solid var(--red); box-shadow: -10px 0 30px rgba(0,0,0,0.5);
            }
            .nav-links.active { right: 0; }
            .nav-links a { font-size: 0.9rem; padding: 15px 0; border-bottom: 1px solid #111; width: 100%; }
        }

        .nav-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); z-index: 9998; backdrop-filter: blur(3px);
        }
        .nav-overlay.active { display: block; }

        /* --- GAME LAYOUT --- */
        .game-wrapper {
            display: flex; flex-direction: column; align-items: center;
            padding: 20px; min-height: calc(100vh - 70px); margin-top: 70px;
            background: radial-gradient(circle at center, #110505 0%, #030303 100%);
        }

        #turn-indicator { 
            font-size: 1rem; font-weight: 900; margin-bottom: 15px; 
            text-transform: uppercase; letter-spacing: 3px;
        }

        .hand { display: flex; gap: 8px; padding: 10px; justify-content: center; min-height: 110px; }
        .hand-label { font-size: 0.6rem; color: #444; text-transform: uppercase; letter-spacing: 2px; font-weight: 900; margin: 5px 0; }

        /* --- BOARD --- */
        .grid {
            display: grid; grid-template-columns: repeat(3, 90px);
            grid-template-rows: repeat(3, 120px); gap: 8px;
            padding: 15px; background: rgba(255,255,255,0.02);
            border: 1px solid var(--border); border-radius: 4px;
        }

        .slot {
            background: #000; border: 1px solid #1a1a1a; border-radius: 3px;
            display: flex; align-items: center; justify-content: center;
        }

        /* --- CARD VISUALS --- */
        .card {
            width: 85px; height: 115px; border-radius: 3px;
            position: relative; cursor: pointer; transition: 0.2s;
            background: #111; border: 1px solid #333;
        }
        .card.player { border-color: var(--blue); }
        .card.enemy { border-color: var(--red); }
        .card.active-selection { transform: translateY(-10px); border-color: var(--gold); box-shadow: 0 0 15px var(--gold); }

        .stat { 
            position: absolute; width: 20px; height: 20px; 
            background: #000; border: 1px solid #333;
            border-radius: 2px; display: flex; align-items: center; justify-content: center;
            font-weight: 900; font-size: 0.7rem;
        }
        .card.player .stat { color: var(--blue); border-color: var(--blue); }
        .card.enemy .stat { color: var(--red); border-color: var(--red); }

        .stat.top { top: 2px; left: 50%; transform: translateX(-50%); }
        .stat.right { right: 2px; top: 50%; transform: translateY(-50%); }
        .stat.bottom { bottom: 2px; left: 50%; transform: translateX(-50%); }
        .stat.left { left: 2px; top: 50%; transform: translateY(-50%); }

        @media (min-width: 768px) {
            .game-wrapper { flex-direction: row; justify-content: center; gap: 40px; }
            .hand { flex-direction: column; }
            .grid { grid-template-columns: repeat(3, 120px); grid-template-rows: repeat(3, 160px); }
            .card { width: 110px; height: 150px; }
        }
    </style>
</head>
<body>

    <nav class="navbar">
        <a href="index.html" class="brand">
            <img src="logo.png" alt="DJ">
            <span>DarkJurassic</span>
        </a>
        <div class="menu-toggle" onclick="toggleMenu()"><i class="fa fa-bars"></i></div>
        <ul class="nav-links" id="nav-menu">
            <li><a href="index.html"><i class="fa fa-home"></i> Home</a></li>
            <li><a href="forum.html"><i class="fa fa-comments"></i> Intel</a></li>
            <li><a href="sightings.html"><i class="fa fa-eye"></i> Tracker</a></li>
            <li><a href="dinosaurs.html"><i class="fa fa-dragon"></i> Species</a></li>
            <li><a href="users.html"><i class="fa fa-users"></i> Agents</a></li>
            <li><a href="dms.html"><i class="fa fa-envelope"></i> DMs</a></li>
            <li class="active"><a href="cards.html"><i class="fa fa-th"></i> Cards</a></li>
            <li><a href="blackmarket.html"><i class="fa fa-skull"></i> Market</a></li>
            <li><a href="vault.html"><i class="fa fa-lock"></i> Vault</a></li>
            <li><a href="profile.html"><i class="fa fa-user"></i> System</a></li>
        </ul>
    </nav>
    <div class="nav-overlay" id="nav-overlay" onclick="toggleMenu()"></div>

    <div class="game-wrapper">
        <div>
            <div class="hand-label">InGen Opponent</div>
            <div id="enemy-hand" class="hand"></div>
        </div>

        <div>
            <div id="turn-indicator">INITIALIZING...</div>
            <div class="grid" id="game-board">
                <div class="slot" onclick="placeOnBoard(0)"></div>
                <div class="slot" onclick="placeOnBoard(1)"></div>
                <div class="slot" onclick="placeOnBoard(2)"></div>
                <div class="slot" onclick="placeOnBoard(3)"></div>
                <div class="slot" onclick="placeOnBoard(4)"></div>
                <div class="slot" onclick="placeOnBoard(5)"></div>
                <div class="slot" onclick="placeOnBoard(6)"></div>
                <div class="slot" onclick="placeOnBoard(7)"></div>
                <div class="slot" onclick="placeOnBoard(8)"></div>
            </div>
        </div>

        <div>
            <div class="hand-label">Your Arsenal</div>
            <div id="player-hand" class="hand"></div>
        </div>
    </div>

    <script>
        function toggleMenu() {
            document.getElementById('nav-menu').classList.toggle('active');
            document.getElementById('nav-overlay').classList.toggle('active');
        }

        const cardLibrary = [
            { name: "T-Rex", stats: [9, 7, 8, 7] },
            { name: "Raptor", stats: [4, 9, 2, 9] },
            { name: "Ankylo", stats: [3, 5, 9, 5] },
            { name: "Spino", stats: [9, 9, 7, 6] },
            { name: "Indom", stats: [9, 9, 9, 9] }
        ];

        let boardState = Array(9).fill(null);
        let selectedCard = null;
        let isPlayerTurn = true;
        let movesMade = 0;

        function initGame() {
            document.getElementById('player-hand').innerHTML = "";
            document.getElementById('enemy-hand').innerHTML = "";
            for(let i=0; i<5; i++) {
                document.getElementById('player-hand').appendChild(renderCard(cardLibrary[Math.floor(Math.random()*5)], 'player', i));
                document.getElementById('enemy-hand').appendChild(renderCard(cardLibrary[Math.floor(Math.random()*5)], 'enemy', i));
            }
            updateTurnStatus();
        }

        function renderCard(data, owner, id) {
            const card = document.createElement('div');
            card.className = `card ${owner}`;
            card.id = `${owner}-card-${id}`;
            card.dataset.stats = JSON.stringify(data.stats);
            card.onclick = () => { if(owner === 'player' && isPlayerTurn) {
                document.querySelectorAll('.card').forEach(c => c.classList.remove('active-selection'));
                card.classList.add('active-selection');
                selectedCard = { id, stats: data.stats };
            }};
            card.innerHTML = `<div class="stat top">${data.stats[0]}</div><div class="stat right">${data.stats[1]}</div><div class="stat bottom">${data.stats[2]}</div><div class="stat left">${data.stats[3]}</div>`;
            return card;
        }

        function placeOnBoard(slot) {
            if(!selectedCard || boardState[slot]) return;
            const el = document.getElementById(`player-card-${selectedCard.id}`);
            document.querySelectorAll('.slot')[slot].appendChild(el);
            boardState[slot] = { owner: 'player', stats: selectedCard.stats };
            el.classList.remove('active-selection');
            el.onclick = null;
            battle(slot);
            movesMade++;
            isPlayerTurn = false;
            updateTurnStatus();
            setTimeout(enemyAI, 1000);
        }

        function battle(idx) {
            const cur = boardState[idx];
            const targets = [{p:idx-3, s:0, os:2},{p:idx+1, s:1, os:3, r:true},{p:idx+3, s:2, os:0},{p:idx-1, s:3, os:1, r:true}];
            targets.forEach(t => {
                if(t.p >=0 && t.p <9 && boardState[t.p]) {
                    if(t.r && Math.floor(t.p/3) !== Math.floor(idx/3)) return;
                    const other = boardState[t.p];
                    if(other.owner !== cur.owner && cur.stats[t.s] > other.stats[t.os]) {
                        other.owner = cur.owner;
                        document.querySelectorAll('.slot')[t.p].querySelector('.card').className = `card ${cur.owner}`;
                    }
                }
            });
        }

        function enemyAI() {
            const empty = boardState.map((s,i) => s === null ? i : null).filter(s => s !== null);
            const eCards = document.querySelectorAll('#enemy-hand .card');
            if(empty.length > 0 && eCards.length > 0) {
                const slot = empty[Math.floor(Math.random()*empty.length)];
                const el = eCards[0];
                document.querySelectorAll('.slot')[slot].appendChild(el);
                boardState[slot] = { owner: 'enemy', stats: JSON.parse(el.dataset.stats) };
                battle(slot);
                movesMade++;
            }
            isPlayerTurn = true;
            updateTurnStatus();
        }

        function updateTurnStatus() {
            const i = document.getElementById('turn-indicator');
            i.innerText = isPlayerTurn ? "YOUR TURN" : "INGEN TURN";
            i.style.color = isPlayerTurn ? "var(--blue)" : "var(--red)";
        }

        initGame();
    </script>
</body>
</html>